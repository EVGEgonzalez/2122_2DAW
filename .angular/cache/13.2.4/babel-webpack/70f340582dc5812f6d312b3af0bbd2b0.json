{"ast":null,"code":"import { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../config/config.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction FormularioLoginComponent_form_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 5);\n    i0.ɵɵlistener(\"ngSubmit\", function FormularioLoginComponent_form_4_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.enviar();\n    });\n    i0.ɵɵelementStart(1, \"div\", 6);\n    i0.ɵɵelement(2, \"img\", 7)(3, \"img\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\")(5, \"h2\");\n    i0.ɵɵtext(6, \"Inicio de sesi\\u00F3n\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 9)(8, \"label\", 10);\n    i0.ɵɵtext(9, \"Correo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"input\", 11);\n    i0.ɵɵelementStart(11, \"label\", 12);\n    i0.ɵɵtext(12, \"Contrase\\u00F1a\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(13, \"input\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 14);\n    i0.ɵɵtext(15, \"Iniciar Sesi\\u00F3n\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.loginForm);\n  }\n}\n\nfunction FormularioLoginComponent_form_5_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtext(1, \" El nombre es obligatorio. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction FormularioLoginComponent_form_5_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtext(1, \" El correo es incorrecto. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction FormularioLoginComponent_form_5_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtext(1, \" Introduce un n\\u00FAmero de tel\\u00E9fono correcto. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction FormularioLoginComponent_form_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 5);\n    i0.ɵɵlistener(\"ngSubmit\", function FormularioLoginComponent_form_5_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.enviar();\n    });\n    i0.ɵɵelementStart(1, \"div\", 6);\n    i0.ɵɵelement(2, \"img\", 7)(3, \"img\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\")(5, \"h2\");\n    i0.ɵɵtext(6, \"Registrar Usuario\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 9)(8, \"label\", 15);\n    i0.ɵɵtext(9, \"Nombre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"input\", 16);\n    i0.ɵɵtemplate(11, FormularioLoginComponent_form_5_div_11_Template, 2, 0, \"div\", 17);\n    i0.ɵɵelementStart(12, \"label\", 18);\n    i0.ɵɵtext(13, \"Correo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"input\", 19);\n    i0.ɵɵtemplate(15, FormularioLoginComponent_form_5_div_15_Template, 2, 0, \"div\", 17);\n    i0.ɵɵelementStart(16, \"label\", 20);\n    i0.ɵɵtext(17, \"Tel\\u00E9fono\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(18, \"input\", 21);\n    i0.ɵɵtemplate(19, FormularioLoginComponent_form_5_div_19_Template, 2, 0, \"div\", 17);\n    i0.ɵɵelementStart(20, \"label\", 22);\n    i0.ɵɵtext(21, \"Imagen de Perfil \\uD83E\\uDD21\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"input\", 23, 24);\n    i0.ɵɵlistener(\"change\", function FormularioLoginComponent_form_5_Template_input_change_22_listener() {\n      i0.ɵɵrestoreView(_r9);\n\n      const _r7 = i0.ɵɵreference(23);\n\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.procesarImagen(_r7);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"button\", 25);\n    i0.ɵɵtext(25, \"Registrar Usuario\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.altaForm);\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.nombre.invalid && ctx_r1.nombre.touched);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.emailAlta.invalid && ctx_r1.emailAlta.touched);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.telefono.invalid && ctx_r1.telefono.touched);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.altaForm.invalid);\n  }\n}\n\nexport let FormularioLoginComponent = /*#__PURE__*/(() => {\n  class FormularioLoginComponent {\n    constructor(router, configService) {\n      this.router = router;\n      this.configService = configService; //Formulario de Alta y validadores\n\n      this.altaForm = new FormGroup({\n        nombre: new FormControl('', [Validators.required, Validators.minLength(2)]),\n        emailAlta: new FormControl('', [Validators.required, Validators.email]),\n        // passwordAlta: new FormControl('',[Validators.required, Validators.minLength(6)]),\n        // confirm_password: new FormControl('',[Validators.required, Validators.minLength(6)]),\n        telefono: new FormControl('', [Validators.required, Validators.minLength(9), Validators.maxLength(9)]),\n        imagen: new FormControl('')\n      }); //Formulario Login y validadores\n\n      this.loginForm = new FormGroup({\n        emailLogin: new FormControl('', [Validators.required, Validators.email]),\n        passwordLogin: new FormControl('', [Validators.required, Validators.minLength(6)])\n      });\n      this.url = router.url;\n    }\n\n    get emailAlta() {\n      return this.altaForm.get('emailAlta');\n    } // get passwordAlta(){return this.altaForm.get('passwordAlta')}\n    // get confirm_password(){return this.altaForm.get('confirm_password')}\n\n\n    get nombre() {\n      return this.altaForm.get('nombre');\n    }\n\n    get telefono() {\n      return this.altaForm.get('telefono');\n    }\n\n    get imagen() {\n      return this.altaForm.get('imagen');\n    }\n\n    get emailLogin() {\n      return this.altaForm.get('emailLogin');\n    }\n\n    get passwordLogin() {\n      return this.altaForm.get('passwordLogin');\n    }\n    /**\r\n     * @function onPasswordChange\r\n     * @description comprueba si el campo de passworAlta y confirm_password coinciden, si no, el campo confirm password es erróneo\r\n     */\n    // onPasswordChange() {\n    //   if (this.confirm_password!.value == this.passwordAlta!.value) {\n    //     this.confirm_password!.setErrors(null);\n    //   } else {\n    //     this.confirm_password!\n    //     .setErrors({ mismatch: true });\n    //   }\n    // }\n\n\n    ngOnInit() {}\n\n    procesarImagen(imageInput) {\n      const file = imageInput.files[0];\n      const reader = new FileReader();\n      reader.addEventListener('load', event => {\n        file.text().then(texto => this.ficheroBase64 = reader.result);\n      });\n      reader.readAsDataURL(file);\n      console.log(this.ficheroBase64);\n    }\n    /**\r\n     * @function enviar\r\n     * @description función que envía el valor del formulario en forma de objeto al servicio. Según la respuesta del servidor muestra éxito o fracaso.\r\n     */\n\n\n    enviar() {\n      var _a, _b, _c, _d, _e;\n\n      switch (this.url) {\n        case '/alta':\n          let json = {\n            \"accion\": \"alta.usuario\",\n            \"nombre\": (_a = this.nombre) === null || _a === void 0 ? void 0 : _a.value,\n            \"emailAlta\": (_b = this.emailAlta) === null || _b === void 0 ? void 0 : _b.value,\n            \"telefono\": (_c = this.telefono) === null || _c === void 0 ? void 0 : _c.value,\n            \"imagen\": this.ficheroBase64\n          };\n          this.configService.alta(json).subscribe(response => {\n            if (response['resultado'] == 'OK') {\n              alert('exito');\n            } else {\n              alert('fracaso');\n            }\n          });\n          break;\n\n        case '/login':\n          let jsonn = {\n            \"accion\": \"login.usuario\",\n            \"email\": (_d = this.emailLogin) === null || _d === void 0 ? void 0 : _d.value,\n            \"password\": (_e = this.passwordLogin) === null || _e === void 0 ? void 0 : _e.value\n          };\n          this.configService.login(jsonn).subscribe(response => {\n            if (response['resultado'] == 'OK') {\n              alert('exito');\n            } else if (response['resultado'] == 'NOK') {\n              alert('fracaso');\n            }\n          });\n          break;\n      }\n    }\n\n  }\n\n  FormularioLoginComponent.ɵfac = function FormularioLoginComponent_Factory(t) {\n    return new (t || FormularioLoginComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ConfigService));\n  };\n\n  FormularioLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FormularioLoginComponent,\n    selectors: [[\"app-formulario-login\"]],\n    decls: 7,\n    vars: 2,\n    consts: [[1, \"contenedor-grid\"], [1, \"grid-formulario\"], [1, \"contenedor-img\"], [1, \"contenedor-form\"], [3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"contenedor-logos\"], [\"src\", \"assets/logo-proyecto-horizontal.png\", \"alt\", \"Logotipo del proyecto\"], [\"src\", \"assets/fundacion-Loyola.png\", \"alt\", \"Logotipo de la Fundaci\\u00F3n Loyola\"], [1, \"inputs-form\"], [\"for\", \"emailLogin\"], [\"type\", \"mail\", \"formControlName\", \"emailLogin\", \"id\", \"emailLogin\"], [\"for\", \"passwordLogin\"], [\"type\", \"password\", \"formControlName\", \"passwordLogin\", \"id\", \"passwordLogin\"], [\"type\", \"submit\", \"name\", \"iSubmit\"], [\"for\", \"nombre\"], [\"type\", \"text\", \"formControlName\", \"nombre\"], [\"class\", \"error\", 4, \"ngIf\"], [\"for\", \"emailAlta\"], [\"type\", \"email\", \"formControlName\", \"emailAlta\", \"id\", \"emailAlta\", \"placeholder\", \"correo@ejemplo.com\"], [\"for\", \"telefono\"], [\"type\", \"tel\", \"formControlName\", \"telefono\"], [\"for\", \"file\"], [\"type\", \"file\", \"accept\", \"image/*\", \"id\", \"file\", \"formControlName\", \"imagen\", 3, \"change\"], [\"imageInput\", \"\"], [\"type\", \"submit\", \"name\", \"iSubmit\", 3, \"disabled\"], [1, \"error\"]],\n    template: function FormularioLoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵelement(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵtemplate(4, FormularioLoginComponent_form_4_Template, 16, 1, \"form\", 4);\n        i0.ɵɵtemplate(5, FormularioLoginComponent_form_5_Template, 26, 5, \"form\", 4);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(6, \"router-outlet\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.router.url === \"/login\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.router.url === \"/alta\");\n      }\n    },\n    directives: [i3.NgIf, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.DefaultValueAccessor, i4.NgControlStatus, i4.FormControlName, i1.RouterOutlet],\n    styles: [\".contenedor-grid[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;font-family:Open Sans,sans-serif;background-color:#f5f5f5}.grid-formulario[_ngcontent-%COMP%]{width:60%;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));min-height:380px;box-shadow:2px 2px 6px #00000080;-webkit-box-shadow:2px 2px 6px 0px rgba(0,0,0,.5);-moz-box-shadow:2px 2px 6px 0px rgba(0,0,0,.5);background-color:#fff}.contenedor-img[_ngcontent-%COMP%]{background:url(couple-trekking-through-the-rain-in-the-highlands.4f6a7a32e8c9d6c8.jpg);background-size:cover}.grid-formulario[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:space-evenly;padding:1rem}.contenedor-form[_ngcontent-%COMP%]   .contenedor-logos[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));align-items:center;justify-content:center;margin-bottom:.5rem}.contenedor-form[_ngcontent-%COMP%]   .contenedor-logos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%;height:auto}h2[_ngcontent-%COMP%]{color:#fdbd0d;font-weight:600}label[_ngcontent-%COMP%]{color:#39d070;font-weight:600}button[_ngcontent-%COMP%]{width:max-content;padding:.9rem;background-color:#39d070;border:none;border-radius:10px;color:#fff;font-weight:800;cursor:pointer;transition:.3s}button[_ngcontent-%COMP%]:hover{background-color:#30b460}input[_ngcontent-%COMP%]{border:none;border-bottom:2px solid #aaa;outline:none;padding:8px;transition:.3s}input[_ngcontent-%COMP%]:focus{border-color:#747474;box-shadow:#00000017 0 2px 1px,#00000017 0 4px 2px,#00000017 0 8px 4px,#00000017 0 16px 8px,#00000017 0 32px 16px}.inputs-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:90%;grid-row-gap:1rem;row-gap:1rem;margin:1rem 0}.error[_ngcontent-%COMP%]{position:relative;background-color:#ffcece;color:#8b0000;font-weight:600;padding:.3rem .3rem .3rem 1rem}.error[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;width:6px;height:100%;z-index:5;top:0;left:0;background-color:red}@media (max-width: 960px){.grid-formulario[_ngcontent-%COMP%]{width:80%}}@media (max-width: 540px){.contenedor-img[_ngcontent-%COMP%]{display:none}.grid-formulario[_ngcontent-%COMP%]{width:90%;grid-area:1fr}.grid-formulario[_ngcontent-%COMP%]{grid-template-columns:minmax(0,1fr)}}\"]\n  });\n  return FormularioLoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}